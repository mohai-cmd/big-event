import{_ as c}from"./PageContainer-DWImXMaQ.js";import{s as m,q as x,g as E,w as l,v as V,o as F,x as o,B as i,b$ as N,E as U}from"./index-BXliUMaB.js";import{E as y,a as R}from"./el-form-item-CdL3YhwJ.js";import{E as k}from"./_plugin-vue_export-helper-6mGAbISy.js";import{E as q}from"./el-input-BVRoZA15.js";import"./_baseClone-CeGZqSAh.js";const D={__name:"UserPassword",setup(B){const r=m({old_pwd:"",new_pwd:"",re_pwd:""}),_={old_pwd:[{required:!0,message:"原密码不能为空",trigger:"blur"},{min:6,max:15,message:"长度在6到15个字符",trigger:"blur"},{validator:(n,e,t)=>{e===r.value.new_pwd?t(new Error("原密码和新密码不能相同")):t()},trigger:"blur"}],new_pwd:[{required:!0,message:"新密码不能为空",trigger:"blur"},{min:6,max:15,message:"长度在6到15个字符",trigger:"blur"}],re_pwd:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{min:6,max:15,message:"长度在6到15个字符",trigger:"blur"},{validator:(n,e,t)=>{e!==r.value.new_pwd?t(new Error("新密码和确认密码必须相同")):t()},trigger:"blur"}]},u=m(),d=x(),w=V(),g=async()=>{await u.value.validate(),await N(r.value),U.success("修改密码成功"),d.setToken(""),d.userData={},w.push("/login")},f=()=>{u.value.resetFields()};return(n,e)=>{const t=q,s=R,p=k,v=y,b=c;return F(),E(b,{title:"重置密码"},{default:l(()=>[o(v,{ref_key:"formRef",ref:u,model:r.value,rules:_,"label-width":"100px",style:{"max-width":"600px",margin:"20px auto"}},{default:l(()=>[o(s,{label:"原密码",prop:"old_pwd"},{default:l(()=>[o(t,{modelValue:r.value.old_pwd,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value.old_pwd=a),"show-password":""},null,8,["modelValue"])]),_:1}),o(s,{label:"新密码",prop:"new_pwd"},{default:l(()=>[o(t,{modelValue:r.value.new_pwd,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value.new_pwd=a),"show-password":""},null,8,["modelValue"])]),_:1}),o(s,{label:"确认密码",prop:"re_pwd"},{default:l(()=>[o(t,{modelValue:r.value.re_pwd,"onUpdate:modelValue":e[2]||(e[2]=a=>r.value.re_pwd=a),"show-password":""},null,8,["modelValue"])]),_:1}),o(s,null,{default:l(()=>[o(p,{type:"primary",onClick:g},{default:l(()=>e[3]||(e[3]=[i("修改密码")])),_:1,__:[3]}),o(p,{onClick:f},{default:l(()=>e[4]||(e[4]=[i("重置")])),_:1,__:[4]})]),_:1})]),_:1},8,["model"])]),_:1})}}};export{D as default};
